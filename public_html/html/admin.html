<!DOCTYPE html>
<html lang="en">

<head>
  <title>SwapOmen</title>

  <!-- meta tags -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- fonts & icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400&family=Monoton&family=Questrial&display=swap" rel="stylesheet">

  <!-- custom CSS -->
  <link rel="stylesheet" href="../css/admin.css">
  <link rel="stylesheet" href="../css/index.css">
</head>

<body onload="showAllUsers()">
  <header></header>

  <main>
    <h2>- Admin Page -</h2>
    <table id="user-table">
      <template id="userNode">
        <tr>
          <td class="id"></td>
          <td class="name"></td>
          <td class="email"></td>
        </tr>
      </template>
    </table>
    <div id="all-users">

    </div>
  </main>

  <footer></footer>

  <!-- jquery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- SCRIPTS -->
  <script src="/js/httpRequests.js"></script>
  <script src="/js/webserverInterface.js"></script>
  <script src="/js/global.js"></script>
  <script>
    async function showAllUsers() {
      document.getElementById("all-users").innerHTML = "";
      var users = JSON.parse(await adminGetAccounts()).data;
      for (var i = 0; i < users.length; i++) {
        // console.log(users[i]);
        let template = document.querySelector("#userNode").content.cloneNode(true);

        template.querySelector('.id').innerHTML = users[i].ID;
        template.querySelector('.name').innerHTML = users[i].username;
        template.querySelector('.email').innerHTML = users[i].email;
        document.querySelector('#user-table').appendChild(template);
        // document.getElementById("all-users").innerHTML += `${users[i].ID}, ${users[i].username}, ${users[i].email}<br>`;
      }
    }
  </script>
</body>

</html>
